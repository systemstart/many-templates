apiVersion: v1
kind: ConfigMap
metadata:
  name: paperless-env
  namespace: paperless
data:
  PAPERLESS_URL: "https://{{ .subdomains.paperless }}.{{ .domain }}"
  PAPERLESS_ALLOWED_HOSTS: "{{ .subdomains.paperless }}.{{ .domain }}"
  PAPERLESS_CORS_ALLOWED_HOSTS: "https://{{ .subdomains.paperless }}.{{ .domain }}"
  PAPERLESS_TRUSTED_PROXIES: "*"

  # Database
  PAPERLESS_DBENGINE: "postgresql"
  PAPERLESS_DBHOST: "paperless-postgres"
  PAPERLESS_DBPORT: "5432"
  PAPERLESS_DBNAME: "paperless"
  PAPERLESS_DBUSER: "paperless"

  # Redis
  PAPERLESS_REDIS: "redis://paperless-redis:6379"

  # Email
  PAPERLESS_EMAIL_HOST: "{{ .smtp.host }}"
  PAPERLESS_EMAIL_PORT: "{{ .smtp.port }}"
  PAPERLESS_EMAIL_HOST_USER: "{{ .smtp.username }}"
  PAPERLESS_EMAIL_FROM: "{{ .smtp.from }}"
  PAPERLESS_EMAIL_USE_TLS: "true"

  # OIDC via socialaccount/allauth
  PAPERLESS_APPS: "allauth.socialaccount.providers.openid_connect"
  # PAPERLESS_SOCIALACCOUNT_PROVIDERS is in paperless-oidc-config Secret
  # because it contains the OIDC client secret from ESO.

  # OCR
  PAPERLESS_OCR_LANGUAGE: "eng"
  PAPERLESS_TIME_ZONE: "UTC"
